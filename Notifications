-- ===================================================================
-- Notification System
-- ===================================================================
local TweenService = game:GetService("TweenService")
local Debris = game:GetService("Debris")
local CoreGui = game:GetService("CoreGui")

local NotificationContainer, NotificationTemplate

-- This function creates the initial GUI for holding notifications.
local function InitializeNotificationUI()
	if NotificationContainer then return end
	NotificationContainer = create("ScreenGui", {
        Name = "BlindHubNotificationContainer",
        ResetOnSpawn = false,
        ZIndexBehavior = Enum.ZIndexBehavior.Global,
        Parent = CoreGui
    })
	
	create("UIListLayout", {
        Parent = NotificationContainer,
        FillDirection = Enum.FillDirection.Vertical,
        HorizontalAlignment = Enum.HorizontalAlignment.Right,
        VerticalAlignment = Enum.VerticalAlignment.Bottom,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 5)
    })

	NotificationTemplate = create("Frame", {
        Name = "NotificationTemplate",
        AnchorPoint = Vector2.new(1, 1),
        Position = UDim2.new(1, 250, 1, -20),
        Size = UDim2.fromOffset(220, 55),
        BackgroundColor3 = Color3.fromRGB(28, 28, 31),
        BackgroundTransparency = 0.6,
        BorderSizePixel = 0
    })
	create("UICorner", { CornerRadius = UDim.new(0, 8), Parent = NotificationTemplate })
	
	create("TextLabel", {
        Parent = NotificationTemplate, Name = "Title", Size = UDim2.new(1, -10, 0, 22), Position = UDim2.new(0.5, 0, 0, 4), AnchorPoint = Vector2.new(0.5, 0), BackgroundTransparency = 1, Font = Enum.Font.SourceSansBold, TextColor3 = Color3.new(1, 1, 1), TextSize = 15
    })
	
	create("TextLabel", {
        Parent = NotificationTemplate, Name = "Content", Size = UDim2.new(1, -10, 0, 25), Position = UDim2.new(0.5, 0, 1, -4), AnchorPoint = Vector2.new(0.5, 1), BackgroundTransparency = 1, Font = Enum.Font.SourceSans, TextColor3 = Color3.new(1, 1, 1), TextSize = 13, TextWrapped = true
    })
end

-- Call this function to show a notification.
local function CreateNotification(titleText, contentText, duration)
	if not NotificationTemplate then InitializeNotificationUI() end
	duration = duration or 5
	local notifClone = NotificationTemplate:Clone()
	notifClone.Title.Text = titleText
	notifClone.Content.Text = contentText
	notifClone.LayoutOrder = -tick()
	notifClone.Parent = NotificationContainer

	TweenService:Create(notifClone, TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {Position = UDim2.new(1, -20, 1, -20)}):Play()
	Debris:AddItem(notifClone, duration + 0.3)
end
