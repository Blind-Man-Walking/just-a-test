-- ##################################################################
-- ##################################################################
-- ###   [  START OF THE UI LIBRARY  ]   ###
-- ### (This script creates all the functions) ###
-- ##################################################################
-- ##################################################################

-- ### Create the main Library table ###
local Library = {}

-- ### Services ###
local UserInputService = game:GetService("UserInputService")
local PlayerGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")

local HttpService_Success, HttpService = pcall(game.GetService, game, "HttpService")

-- ### Global Events & Theme ###
local CloseAllDropdowns = Instance.new("BindableEvent")
Library.themeColor = Color3.fromRGB(0, 100, 255)
local ThemeChanged = Instance.new("BindableEvent")

-- ### Global UI State ###
local selectedTab = nil -- This will keep track of the active tab
local pages = {} -- Table to hold pages
local activeColor = Color3.fromRGB(35, 35, 35)
local inactiveColor = Color3.fromRGB(20, 20, 20)
local activeTextColor = Color3.fromRGB(255, 255, 255) -- Bright white
local inactiveTextColor = Color3.fromRGB(200, 200, 200) -- Gray-white

-- ### Global Position Definitions ###
Library.Positions = {
    Big = UDim2.new(0, 0, 0, 2),
    SmallTop = UDim2.new(0, 208 + 5, 0, 2),
    SmallBottom = UDim2.new(0, 208 + 5, 0, 2 + 201 + 5)
}

-- ### Notification GUI (Separate from Main UI) ###
-- This is created once and reused
local notificationGui = Instance.new("ScreenGui")
notificationGui.Name = "NotificationGui"
notificationGui.Parent = PlayerGui
notificationGui.ResetOnSpawn = false

local notificationContainer = Instance.new("Frame")
notificationContainer.Name = "NotificationContainer"
notificationContainer.Parent = notificationGui
notificationContainer.BackgroundTransparency = 1
notificationContainer.AnchorPoint = Vector2.new(1, 1) -- Bottom-Right
notificationContainer.Position = UDim2.new(1, -10, 1, -10) -- 10px padding
notificationContainer.Size = UDim2.new(0, 250, 0, 300) -- 250px wide, 300px max height
notificationContainer.ZIndex = 500 -- Make sure it's on top

local notificationLayout = Instance.new("UIListLayout")
notificationLayout.Parent = notificationContainer
notificationLayout.FillDirection = Enum.FillDirection.Vertical
notificationLayout.SortOrder = Enum.SortOrder.LayoutOrder
notificationLayout.VerticalAlignment = Enum.VerticalAlignment.Bottom
notificationLayout.Padding = UDim.new(0, 5)


-- ##################################################################
-- ### HELPER FUNCTIONS (THE TOOLKIT)
-- ##################################################################

--- ### FUNCTION: createNotification ###
function Library.createNotification(title, message)
    local notificationFrame = Instance.new("Frame")
    notificationFrame.Name = "Notification"
    notificationFrame.Parent = notificationContainer
    notificationFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    notificationFrame.BackgroundTransparency = 0.5
    notificationFrame.Size = UDim2.new(1, 0, 0, 0)
    notificationFrame.AutomaticSize = Enum.AutomaticSize.Y
    
    local frameCorner = Instance.new("UICorner")
    frameCorner.CornerRadius = UDim.new(0, 6)
    frameCorner.Parent = notificationFrame
    
    local frameStroke = Instance.new("UIStroke")
    frameStroke.Color = Color3.fromRGB(45, 45, 45)
    frameStroke.Thickness = 1
    frameStroke.Parent = notificationFrame
    
    local framePadding = Instance.new("UIPadding")
    framePadding.PaddingLeft = UDim.new(0, 8)
    framePadding.PaddingRight = UDim.new(0, 8)
    framePadding.PaddingTop = UDim.new(0, 8)
    framePadding.PaddingBottom = UDim.new(0, 8)
    framePadding.Parent = notificationFrame
    
    local internalLayout = Instance.new("UIListLayout")
    internalLayout.Parent = notificationFrame
    internalLayout.FillDirection = Enum.FillDirection.Vertical
    internalLayout.SortOrder = Enum.SortOrder.LayoutOrder
    internalLayout.Padding = UDim.new(0, 2)
    
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Parent = notificationFrame
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.TextSize = 16
    titleLabel.TextColor3 = Color3.fromRGB(220, 220, 220)
    titleLabel.Text = title
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.BackgroundTransparency = 1
    titleLabel.Size = UDim2.new(1, 0, 0, 0)
    titleLabel.AutomaticSize = Enum.AutomaticSize.Y
    titleLabel.TextWrapped = true
    
    local messageLabel = Instance.new("TextLabel")
    messageLabel.Name = "Message"
    messageLabel.Parent = notificationFrame
    messageLabel.Font = Enum.Font.SourceSans
    messageLabel.TextSize = 14
    messageLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    messageLabel.Text = message
    messageLabel.TextXAlignment = Enum.TextXAlignment.Left
    messageLabel.BackgroundTransparency = 1
    messageLabel.Size = UDim2.new(1, 0, 0, 0)
    messageLabel.AutomaticSize = Enum.AutomaticSize.Y
    messageLabel.TextWrapped = true
    
    local tweenInfoIn = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tweenInfoOut = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    
    TweenService:Create(notificationFrame, tweenInfoIn, {BackgroundTransparency = 0.5}):Play()
    TweenService:Create(titleLabel, tweenInfoIn, {TextTransparency = 0}):Play()
    TweenService:Create(messageLabel, tweenInfoIn, {TextTransparency = 0}):Play()
    
    task.wait(5)
    
    local fadeOut = TweenService:Create(notificationFrame, tweenInfoOut, {BackgroundTransparency = 1})
    TweenService:Create(titleLabel, tweenInfoOut, {TextTransparency = 1}):Play()
    TweenService:Create(messageLabel, tweenInfoOut, {TextTransparency = 1}):Play()
    fadeOut:Play()
    
    fadeOut.Completed:Wait()
    notificationFrame:Destroy()
end

--- ### FUNCTION: createWatermark ###
function Library.createWatermark(text, fontSize, transparency, xPos, yPos)
    local oldWatermark = PlayerGui:FindFirstChild("WatermarkGui")
    if oldWatermark then oldWatermark:Destroy() end

    local watermarkGui = Instance.new("ScreenGui")
    watermarkGui.Name = "WatermarkGui"
    watermarkGui.Parent = PlayerGui
    watermarkGui.ResetOnSpawn = false
    watermarkGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    local watermarkLabel = Instance.new("TextLabel")
    watermarkLabel.Name = "WatermarkLabel"
    watermarkLabel.Parent = watermarkGui
    watermarkLabel.Text = text or "My UI"
    watermarkLabel.Font = Enum.Font.SourceSansBold
    watermarkLabel.TextSize = fontSize or 16
    watermarkLabel.TextColor3 = Library.themeColor
    watermarkLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    watermarkLabel.BackgroundTransparency = (transparency or 20) / 100
    local initialX = (xPos or 100) / 100
    local initialY = (yPos or 0) / 100
    watermarkLabel.AnchorPoint = Vector2.new(initialX, initialY)
    watermarkLabel.Position = UDim2.new(initialX, 0, initialY, 0)
    watermarkLabel.Size = UDim2.new(0, 170, 0, 40)
    watermarkLabel.TextXAlignment = Enum.TextXAlignment.Center
    watermarkLabel.TextYAlignment = Enum.TextYAlignment.Center 

    local watermarkCorner = Instance.new("UICorner")
    watermarkCorner.CornerRadius = UDim.new(0, 4)
    watermarkCorner.Parent = watermarkLabel

    local watermarkStroke = Instance.new("UIStroke")
    watermarkStroke.Color = Color3.fromRGB(0, 0, 0)
    watermarkStroke.Thickness = 1
    watermarkStroke.Parent = watermarkLabel
    
    ThemeChanged.Event:Connect(function(newColor)
        if watermarkLabel then watermarkLabel.TextColor3 = newColor end
    end)

    return watermarkGui, watermarkLabel
end

--- ### FUNCTION: createSection (Base) ###
function Library.createSection(parent, sectionTitle, size, position, extraScrollPadding)
    local sectionFrame = Instance.new("Frame")
    sectionFrame.Name = sectionTitle:gsub("%s+", "") .. "Section"
    sectionFrame.Parent = parent
    sectionFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    sectionFrame.BackgroundTransparency = 0.2
    sectionFrame.Size = size
    sectionFrame.Position = position

    local sectionCorner = Instance.new("UICorner")
    sectionCorner.CornerRadius = UDim.new(0, 6)
    sectionCorner.Parent = sectionFrame

    local sectionOutline = Instance.new("UIStroke")
    sectionOutline.Color = Color3.fromRGB(45, 45, 45)
    sectionOutline.Thickness = 1
    sectionOutline.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    sectionOutline.Parent = sectionFrame

    local title = Instance.new("TextLabel")
    title.Name = "SectionTitle"
    title.Parent = sectionFrame
    title.Text = sectionTitle
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 14
    title.TextColor3 = Color3.fromRGB(200, 200, 200)
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.BackgroundTransparency = 1
    title.Position = UDim2.new(0, 10, 0, 5)
    title.Size = UDim2.new(1, -20, 0, 16)

    local titleDivider = Instance.new("Frame")
    titleDivider.Name = "TitleDivider"
    titleDivider.Parent = sectionFrame
    titleDivider.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    titleDivider.BorderSizePixel = 0
    titleDivider.Position = UDim2.new(0, 10, 0, 23)
    titleDivider.Size = UDim2.new(1, -20, 0, 1)

    local contentHolder = Instance.new("ScrollingFrame")
    contentHolder.Name = "ContentHolder"
    contentHolder.Parent = sectionFrame
    contentHolder.BackgroundTransparency = 1
    contentHolder.Position = UDim2.new(0, 10, 0, 25)
    contentHolder.Size = UDim2.new(1, -20, 1, -25 - 5)
    contentHolder.BorderSizePixel = 0
    contentHolder.ScrollingDirection = Enum.ScrollingDirection.Y
    contentHolder.ScrollBarThickness = 2
    contentHolder.ScrollBarImageColor3 = Library.themeColor
    contentHolder.CanvasSize = UDim2.new(0, 0, 0, 0)

    local contentLayout = Instance.new("UIListLayout")
    contentLayout.Parent = contentHolder
    contentLayout.FillDirection = Enum.FillDirection.Vertical
    contentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    contentLayout.Padding = UDim.new(0, 5)
    
    local contentPadding = Instance.new("UIPadding")
    contentPadding.Parent = contentHolder
    contentPadding.PaddingLeft = UDim.new(0, 2)
    contentPadding.PaddingRight = UDim.new(0, 2)
    
    contentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        local contentHeight = contentLayout.AbsoluteContentSize.Y
        contentHolder.CanvasSize = UDim2.new(0, 0, 0, contentHeight + (extraScrollPadding or 0))
    end)
    
    ThemeChanged.Event:Connect(function(newColor)
        contentHolder.ScrollBarImageColor3 = newColor
    end)
    
    return sectionFrame, contentHolder
end

--- ### FUNCTION: createBigSection ###
function Library.createBigSection(parent, title, position)
    local size = UDim2.new(0, 208, 1, -2)
    return Library.createSection(parent, title, size, position, 20)
end

--- ### FUNCTION: createSmallSection ###
function Library.createSmallSection(parent, title, position)
    local size = UDim2.new(0, 208, 0, 201)
    return Library.createSection(parent, title, size, position, 20)
end

--- ### FUNCTION: createButton ###
function Library.createButton(parent, buttonText)
    local button = Instance.new("TextButton")
    button.Name = buttonText:gsub("%s+", "") .. "Button"
    button.Parent = parent
    button.Text = buttonText
    button.Font = Enum.Font.SourceSans
    button.TextSize = 14
    button.TextColor3 = Color3.fromRGB(200, 200, 200)
    button.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    button.TextXAlignment = Enum.TextXAlignment.Left
    button.Size = UDim2.new(1, 0, 0, 25)

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 4)
    btnCorner.Parent = button

    local btnPadding = Instance.new("UIPadding")
    btnPadding.PaddingLeft = UDim.new(0, 8)
    btnPadding.Parent = button

    local arrowLabel = Instance.new("TextLabel")
    arrowLabel.Name = "ArrowLabel"
    arrowLabel.Parent = button
    arrowLabel.Text = "»"
    arrowLabel.Font = Enum.Font.SourceSans
    arrowLabel.TextSize = 18
    arrowLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    arrowLabel.BackgroundTransparency = 1
    arrowLabel.TextXAlignment = Enum.TextXAlignment.Right
    arrowLabel.Size = UDim2.new(1, -8, 1, 0)
    arrowLabel.Position = UDim2.new(0, 0, 0, 0)
    arrowLabel.Active = false
    
    return button
end

--- ### FUNCTION: createToggleButton ###
function Library.createToggleButton(parent, buttonText, initialValue)
    local toggled = initialValue or false
    local toggleOffColor = Color3.fromRGB(55, 55, 55)
    local handleColor = Color3.fromRGB(255, 255, 255)
    local textOnColor = Color3.fromRGB(255, 255, 255)
    local textOffColor = Color3.fromRGB(200, 200, 200)

    local toggleButton = Instance.new("TextButton")
    toggleButton.Name = buttonText:gsub("%s+", "") .. "Toggle"
    toggleButton.Parent = parent
    toggleButton.Text = buttonText
    toggleButton.Font = Enum.Font.SourceSans
    toggleButton.TextSize = 14
    toggleButton.TextColor3 = textOffColor
    toggleButton.TextXAlignment = Enum.TextXAlignment.Left
    toggleButton.BackgroundTransparency = 1
    toggleButton.BorderSizePixel = 0
    toggleButton.Size = UDim2.new(1, 0, 0, 25)

    local btnPadding = Instance.new("UIPadding")
    btnPadding.PaddingLeft = UDim.new(0, 8)
    btnPadding.Parent = toggleButton

    local switchTrack = Instance.new("Frame")
    switchTrack.Name = "SwitchTrack"
    switchTrack.Parent = toggleButton
    switchTrack.Size = UDim2.new(0, 40, 0, 16)
    switchTrack.Position = UDim2.new(1, -43, 0.5, -8)
    switchTrack.BackgroundColor3 = toggleOffColor
    switchTrack.BorderSizePixel = 0
    
    local trackCorner = Instance.new("UICorner")
    trackCorner.CornerRadius = UDim.new(1, 0)
    trackCorner.Parent = switchTrack

    local switchHandle = Instance.new("Frame")
    switchHandle.Name = "SwitchHandle"
    switchHandle.Parent = switchTrack
    switchHandle.Size = UDim2.new(0, 12, 0, 12)
    switchHandle.BackgroundColor3 = handleColor
    switchHandle.BorderSizePixel = 0

    local handleCorner = Instance.new("UICorner")
    handleCorner.CornerRadius = UDim.new(1, 0)
    handleCorner.Parent = switchHandle
    
    local tweenInfo = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

    local function updateAppearance()
        local targetHandlePos = toggled and UDim2.new(1, -14, 0.5, -6) or UDim2.new(0, 2, 0.5, -6)
        local targetTrackColor = toggled and Library.themeColor or toggleOffColor
        local targetTextColor = toggled and textOnColor or textOffColor

        TweenService:Create(switchHandle, tweenInfo, {Position = targetHandlePos}):Play()
        TweenService:Create(switchTrack, tweenInfo, {BackgroundColor3 = targetTrackColor}):Play()
        toggleButton.TextColor3 = targetTextColor
    end

    toggleButton.MouseButton1Click:Connect(function()
        toggled = not toggled
        updateAppearance()
    end)
    
    updateAppearance() 
    
    local function setValue(newValue)
        toggled = newValue
        updateAppearance()
    end
    
    ThemeChanged.Event:Connect(function(newColor)
        updateAppearance()
    end)
    
    return toggleButton, function() return toggled end, setValue
end

--- ### FUNCTION: createSlider ###
function Library.createSlider(parent, sliderText, minValue, maxValue, initialValue, rectangle)
    local currentValue = initialValue or minValue
    local onChanged = Instance.new("BindableEvent")
    
    local sliderContainer = Instance.new("Frame")
    sliderContainer.Name = sliderText:gsub("%s+", "") .. "Slider"
    sliderContainer.Parent = parent
    sliderContainer.BackgroundTransparency = 1
    sliderContainer.Size = UDim2.new(1, 0, 0, 30) 

    local label = Instance.new("TextLabel")
    label.Name = "Label"
    label.Parent = sliderContainer
    label.Text = sliderText
    label.Font = Enum.Font.SourceSans
    label.TextSize = 14
    label.TextColor3 = Color3.fromRGB(200, 200, 200)
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.BackgroundTransparency = 1
    label.Size = UDim2.new(1, 0, 0, 16) 
    label.Position = UDim2.new(0, 8, 0, 0) 

    local track = Instance.new("Frame")
    track.Name = "Track"
    track.Parent = sliderContainer
    track.BackgroundColor3 = Color3.fromRGB(30, 30, 30) 
    track.BorderSizePixel = 0
    track.Size = UDim2.new(1, -16, 0, 12) 
    track.Position = UDim2.new(0, 8, 0, 16) 
    
    local trackCorner = Instance.new("UICorner")
    trackCorner.CornerRadius = UDim.new(0, 4)
    trackCorner.Parent = track
    
    local progress = Instance.new("TextButton") 
    progress.Name = "ProgressHandle"
    progress.Parent = track
    progress.BackgroundColor3 = Library.themeColor
    progress.BorderSizePixel = 0
    progress.Text = "" 
    progress.Font = Enum.Font.SourceSansBold
    progress.TextSize = 10 
    progress.TextColor3 = Color3.fromRGB(255, 255, 255) 
    progress.TextXAlignment = Enum.TextXAlignment.Right 
    progress.TextYAlignment = Enum.TextYAlignment.Center
    progress.ClipsDescendants = true 

    local progressCorner = Instance.new("UICorner")
    progressCorner.CornerRadius = UDim.new(0, 4)
    progressCorner.Parent = progress

    local progressStroke = Instance.new("UIStroke")
    progressStroke.Color = Color3.fromRGB(0, 0, 0) 
    progressStroke.Thickness = 1
    progressStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    progressStroke.Parent = progress

    local isDragging = false

    local function updateSlider(value)
        currentValue = math.clamp(value, minValue, maxValue)
        local percent = (currentValue - minValue) / (maxValue - minValue)
        
        local minHandleWidth = 20 / track.AbsoluteSize.X 
        local actualPercent = math.max(percent, minHandleWidth)

        progress.Size = UDim2.new(actualPercent, 0, 1, 0)
        progress.Text = tostring(math.floor(currentValue))
        
        onChanged:Fire(currentValue)
    end
    
    local function updateFromInput(input)
        local trackAbsolutePos = track.AbsolutePosition
        local trackAbsoluteSize = track.AbsoluteSize
        local mouseX = input.Position.X
        
        local percent = (mouseX - trackAbsolutePos.X) / trackAbsoluteSize.X
        percent = math.clamp(percent, 0, 1)
        
        local newValue = minValue + (maxValue - minValue) * percent
        updateSlider(newValue)
    end

    track.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            isDragging = true
            rectangle.Draggable = false
            updateFromInput(input)
        end
    end)
    
    progress.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            isDragging = true
            rectangle.Draggable = false
            updateFromInput(input)
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if isDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            updateFromInput(input)
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and isDragging then
            isDragging = false
            rectangle.Draggable = true
        end
    end)
    
    updateSlider(currentValue)
    
    ThemeChanged.Event:Connect(function(newColor)
        progress.BackgroundColor3 = newColor
    end)
    
    return sliderContainer, function() return currentValue end, onChanged.Event, updateSlider
end

--- ### FUNCTION: createTextBox ###
function Library.createTextBox(parent, placeholderText, initialValue, rectangle)
    local textBox = Instance.new("TextBox")
    textBox.Name = placeholderText:gsub("%s+", "") .. "TextBox"
    textBox.Parent = parent
    textBox.Text = initialValue or ""
    textBox.PlaceholderText = placeholderText
    textBox.Font = Enum.Font.SourceSans
    textBox.TextSize = 14
    textBox.TextColor3 = Color3.fromRGB(200, 200, 200)
    textBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
    textBox.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    textBox.BackgroundTransparency = 0
    textBox.Size = UDim2.new(1, 0, 0, 25)
    textBox.TextXAlignment = Enum.TextXAlignment.Left
    textBox.ClearTextOnFocus = false

    local tbCorner = Instance.new("UICorner")
    tbCorner.CornerRadius = UDim.new(0, 4)
    tbCorner.Parent = textBox

    local tbStroke = Instance.new("UIStroke")
    tbStroke.Color = Library.themeColor
    tbStroke.Thickness = 1
    tbStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    tbStroke.Parent = textBox
    
    local themeConnection = ThemeChanged.Event:Connect(function(newColor)
        tbStroke.Color = newColor
    end)
    
    textBox.Destroying:Connect(function()
        themeConnection:Disconnect()
    end)

    local padding = Instance.new("UIPadding")
    padding.PaddingLeft = UDim.new(0, 16)
    padding.PaddingRight = UDim.new(0, 16)
    padding.Parent = textBox

    textBox.Focused:Connect(function()
        rectangle.Draggable = false
    end)
    
    textBox.FocusLost:Connect(function()
        rectangle.Draggable = true
    end)

    local function setValue(newValue)
        textBox.Text = tostring(newValue)
    end

    return textBox, function() return textBox.Text end, setValue
end

--- ### FUNCTION: createKeybind ###
function Library.createKeybind(parent, text, defaultKey)
    local currentKey = defaultKey or Enum.KeyCode.RightShift
    local isListening = false
    
    local keybindButton = Instance.new("TextButton")
    keybindButton.Name = text:gsub("%s+", "") .. "Keybind"
    keybindButton.Parent = parent
    keybindButton.Text = text .. ": [" .. currentKey.Name .. "]"
    keybindButton.Font = Enum.Font.SourceSans
    keybindButton.TextSize = 14
    keybindButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    keybindButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    keybindButton.TextXAlignment = Enum.TextXAlignment.Left
    keybindButton.Size = UDim2.new(1, 0, 0, 25)

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 4)
    btnCorner.Parent = keybindButton

    local btnPadding = Instance.new("UIPadding")
    btnPadding.PaddingLeft = UDim.new(0, 8)
    btnPadding.Parent = keybindButton
    
    local inputConnection = nil
    
    keybindButton.MouseButton1Click:Connect(function()
        if isListening then return end
        
        isListening = true
        keybindButton.Text = text .. ": [...]"
        
        inputConnection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
            if gameProcessed then return end
            
            if input.UserInputType == Enum.UserInputType.Keyboard then
                currentKey = input.KeyCode
                keybindButton.Text = text .. ": [" .. currentKey.Name .. "]"
                isListening = false
                if inputConnection then
                    inputConnection:Disconnect()
                    inputConnection = nil
                end
            end
        end)
    end)

    local function setValue(newKey)
        if type(newKey) == "string" then
            currentKey = Enum.KeyCode[newKey] or defaultKey
        else
            currentKey = newKey
        end
        keybindButton.Text = text .. ": [" .. currentKey.Name .. "]"
    end

    return keybindButton, function() return currentKey end, setValue
end

--- ### FUNCTION: createDivider ###
function Library.createDivider(parent)
    local divider = Instance.new("Frame")
    divider.Name = "Divider"
    divider.Parent = parent
    divider.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    divider.BorderSizePixel = 0
    divider.Size = UDim2.new(1, 0, 0, 1)
    return divider
end

--- ### FUNCTION: addLogoToTab ###
function Library.addLogoToTab(tabButton, logoId, position, size)
    if not tabButton then return nil end
    
    local logo = Instance.new("ImageLabel")
    logo.Name = "TabLogo"
    logo.Parent = tabButton
    logo.Image = logoId
    logo.BackgroundTransparency = 1
    logo.Size = size or UDim2.new(0, 20, 0, 20)
    logo.Position = position or UDim2.fromScale(0.5, 0.5)
    logo.AnchorPoint = Vector2.new(0.5, 0.5)
    logo.ZIndex = (tabButton.ZIndex or 1) + 1
    
    logo.ImageColor3 = tabButton.TextColor3 
    
    local connection = tabButton:GetPropertyChangedSignal("TextColor3"):Connect(function()
        logo.ImageColor3 = tabButton.TextColor3
    end)
    
    logo.Destroying:Connect(function()
        connection:Disconnect()
    end)
    
    return logo
end

--- ### FUNCTION: addLogoToSection ###
function Library.addLogoToSection(sectionFrame, logoId, position, size)
    if not sectionFrame then return nil end
    
    local titleLabel = sectionFrame:FindFirstChild("SectionTitle")
    local titleColor = titleLabel and titleLabel.TextColor3 or Color3.fromRGB(200, 200, 200)
    
    local logo = Instance.new("ImageLabel")
    logo.Name = "SectionLogo"
    logo.Parent = sectionFrame
    logo.Image = logoId
    logo.BackgroundTransparency = 1
    logo.Size = size or UDim2.new(0, 16, 0, 16)
    logo.Position = position or UDim2.new(0, 10, 0, 5) 
    logo.ZIndex = (sectionFrame.ZIndex or 1) + 1
    logo.ImageColor3 = titleColor
    
    return logo
end

--- ### FUNCTION: createDropdown ###
function Library.createDropdown(parent, dropdownText, optionsList, rectangle)
    local currentOptions = optionsList or {}
    local selectedValue = currentOptions[1] or "Select..."
    local isOpen = false
    local onChanged = Instance.new("BindableEvent")
    
    local dropdownContainer = Instance.new("Frame")
    dropdownContainer.Name = dropdownText:gsub("%s+", "") .. "Dropdown"
    dropdownContainer.Parent = parent
    dropdownContainer.BackgroundTransparency = 1
    dropdownContainer.Size = UDim2.new(1, 0, 0, 25)
    dropdownContainer.ClipsDescendants = false
    dropdownContainer.ZIndex = 2

    local mainButton = Instance.new("TextButton")
    mainButton.Name = "MainButton"
    mainButton.Parent = dropdownContainer
    mainButton.Text = selectedValue
    mainButton.Font = Enum.Font.SourceSans
    mainButton.TextSize = 14
    mainButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    mainButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    mainButton.TextXAlignment = Enum.TextXAlignment.Left
    mainButton.Size = UDim2.new(1, 0, 1, 0)
    mainButton.ZIndex = 3

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 4)
    btnCorner.Parent = mainButton

    local btnPadding = Instance.new("UIPadding")
    btnPadding.PaddingLeft = UDim.new(0, 8)
    btnPadding.Parent = mainButton
    
    local arrowLabel = Instance.new("TextLabel")
    arrowLabel.Name = "ArrowLabel"
    arrowLabel.Parent = mainButton
    arrowLabel.Text = "˅"
    arrowLabel.Font = Enum.Font.SourceSans
    arrowLabel.TextSize = 14
    arrowLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    arrowLabel.BackgroundTransparency = 1
    arrowLabel.TextXAlignment = Enum.TextXAlignment.Right
    arrowLabel.Size = UDim2.new(1, -8, 1, 0)
    arrowLabel.Active = false
    arrowLabel.ZIndex = 4

    local dropdownList = Instance.new("ScrollingFrame")
    dropdownList.Name = "DropdownList"
    dropdownList.Parent = rectangle 
    dropdownList.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    dropdownList.Position = UDim2.new(0, 0, 0, 0)
    dropdownList.Visible = false
    dropdownList.ZIndex = 100 
    dropdownList.BorderSizePixel = 0
    dropdownList.ScrollBarThickness = 2
    dropdownList.ScrollBarImageColor3 = Library.themeColor
    dropdownList.ClipsDescendants = true
    
    local listLayout = Instance.new("UIListLayout")
    listLayout.Parent = dropdownList
    listLayout.FillDirection = Enum.FillDirection.Vertical
    listLayout.SortOrder = Enum.SortOrder.LayoutOrder
    listLayout.Padding = UDim.new(0, 2)
    
    local listCorner = Instance.new("UICorner")
    listCorner.CornerRadius = UDim.new(0, 4)
    listCorner.Parent = dropdownList
    
    local totalHeight = 0
    local optionHeight = 25
    local optionPadding = listLayout.Padding.Offset
    local maxHeight = 180
    
    local function closeDropdown()
        if not isOpen then return end
        isOpen = false
        dropdownList.Visible = false
        arrowLabel.Text = "˅"
    end

    local function setValue(newValue)
        selectedValue = newValue
        mainButton.Text = newValue
        local found = false
        for _, v in ipairs(currentOptions) do
            if v == selectedValue then
                found = true
                break
            end
        end
        if found then
            onChanged:Fire(selectedValue)
        end
    end

    local function updateOptions(newOptionsList)
        currentOptions = newOptionsList or {}
        
        for _, child in ipairs(dropdownList:GetChildren()) do
            if child:IsA("TextButton") then
                child:Destroy()
            end
        end
        
        totalHeight = 0
        
        if #currentOptions == 0 then
            selectedValue = "No Options"
            mainButton.Text = "No Options"
        else
            local found = false
            for _, v in ipairs(currentOptions) do
                if v == selectedValue then
                    found = true
                    break
                end
            end
            if not found then
                selectedValue = currentOptions[1]
                mainButton.Text = selectedValue
                onChanged:Fire(selectedValue)
            end
        end

        for i, optionName in ipairs(currentOptions) do
            local optionButton = Instance.new("TextButton")
            optionButton.Name = optionName
            optionButton.Parent = dropdownList
            optionButton.Text = "  " .. optionName
            optionButton.Font = Enum.Font.SourceSans
            optionButton.TextSize = 14
            optionButton.TextColor3 = Color3.fromRGB(200, 200, 200)
            optionButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            optionButton.BackgroundTransparency = 0
            optionButton.TextXAlignment = Enum.TextXAlignment.Left
            optionButton.Size = UDim2.new(1, 0, 0, optionHeight)
            optionButton.BorderSizePixel = 0
            optionButton.ZIndex = 101
            
            optionButton.MouseEnter:Connect(function()
                optionButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
            end)
            optionButton.MouseLeave:Connect(function()
                optionButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            end)
            
            optionButton.MouseButton1Click:Connect(function()
                selectedValue = optionName
                mainButton.Text = selectedValue
                onChanged:Fire(selectedValue)
                closeDropdown()
            end)
            
            totalHeight = totalHeight + optionHeight
            if i < #currentOptions then
                totalHeight = totalHeight + optionPadding
            end
        end
        
        dropdownList.CanvasSize = UDim2.new(0, 0, 0, totalHeight + 20)
    end
    
    parent:GetPropertyChangedSignal("CanvasPosition"):Connect(function()
        closeDropdown()
    end)
    
    mainButton.MouseButton1Click:Connect(function()
        if isOpen then
            closeDropdown()
        else
            isOpen = true
            dropdownList.Visible = true
            arrowLabel.Text = "˄"
            
            local currentListHeight = math.min(totalHeight + 4, maxHeight)
            dropdownList.Size = UDim2.new(0, dropdownContainer.AbsoluteSize.X, 0, currentListHeight)

            local containerAbsPos = dropdownContainer.AbsolutePosition
            local rectangleAbsPos = rectangle.AbsolutePosition
            
            local xPos = containerAbsPos.X - rectangleAbsPos.X
            local yPos = containerAbsPos.Y - rectangleAbsPos.Y
            
            local desiredY_Above = yPos - currentListHeight - 5
            local desiredY_Below = yPos + dropdownContainer.AbsoluteSize.Y + 2

            if desiredY_Above < 0 then
                dropdownList.Position = UDim2.new(0, xPos, 0, desiredY_Below)
            else
                dropdownList.Position = UDim2.new(0, xPos, 0, desiredY_Above)
            end
        end
    end)
    
    local connection = CloseAllDropdowns.Event:Connect(closeDropdown)
    
    local themeConnection = ThemeChanged.Event:Connect(function(newColor)
        dropdownList.ScrollBarImageColor3 = newColor
    end)
    
    dropdownContainer.Destroying:Connect(function()
        connection:Disconnect()
        themeConnection:Disconnect()
        dropdownList:Destroy()
    end)
    
    updateOptions(currentOptions)
    
    return dropdownContainer, function() return selectedValue end, updateOptions, onChanged.Event, setValue
end

--- ### FUNCTION: createPlayerDropdown ###
function Library.createPlayerDropdown(parent, rectangle)
    local function getPlayerNames()
        local names = {"Select..."}
        for _, p in ipairs(Players:GetPlayers()) do
            table.insert(names, p.Name)
        end
        return names
    end
    
    local dropdown, getSelected, updateOptions, changedEvent, setValue = Library.createDropdown(parent, "Select Player", getPlayerNames(), rectangle)
    
    Players.PlayerAdded:Connect(function(player) 
        updateOptions(getPlayerNames()) 
    end)
    Players.PlayerRemoving:Connect(function(player) 
        task.wait()
        updateOptions(getPlayerNames()) 
    end)
    
    return dropdown, getSelected, updateOptions, changedEvent, setValue
end

--- ### FUNCTION: setThemeColor ###
function Library.setThemeColor(newColor, titleLabel, subtitleLabel)
    Library.themeColor = newColor -- Update the global variable
    
    if titleLabel then titleLabel.TextColor3 = newColor end
    if subtitleLabel then subtitleLabel.TextColor3 = newColor end
    
    -- Find and update the watermark
    local watermarkGui = PlayerGui:FindFirstChild("WatermarkGui")
    if watermarkGui then
        local watermarkLabel = watermarkGui:FindFirstChild("WatermarkLabel")
        if watermarkLabel then
            watermarkLabel.TextColor3 = newColor
        end
    end
    
    -- Fire the event to update all sliders, toggles, and scrollbars
    ThemeChanged:Fire(newColor)
end

--- ### FUNCTION: createTab ###
function Library.createTab(tabName, tabContainer, contentContainer)
    local tabButton = Instance.new("TextButton")
    tabButton.Name = tabName .. "Tab"
    tabButton.Parent = tabContainer
    tabButton.Text = tabName
    tabButton.Font = Enum.Font.SourceSansBold
    tabButton.TextSize = 16
    tabButton.BorderSizePixel = 0
    tabButton.Size = UDim2.new(1, -10, 0, 30)

    local tabCorner = Instance.new("UICorner")
    tabCorner.CornerRadius = UDim.new(0, 4)
    tabCorner.Parent = tabButton
    
    tabButton.TextXAlignment = Enum.TextXAlignment.Center
    
    local pageFrame = Instance.new("Frame")
    pageFrame.Name = tabName .. "Page"
    pageFrame.Parent = contentContainer
    pageFrame.Size = UDim2.new(1, 0, 1, 0)
    pageFrame.BackgroundTransparency = 1
    pageFrame.Visible = false
    
    pages[tabButton] = pageFrame
    
    if selectedTab == nil then
        tabButton.BackgroundColor3 = activeColor
        tabButton.TextColor3 = activeTextColor
        selectedTab = tabButton
        pageFrame.Visible = true
    else
        tabButton.BackgroundColor3 = inactiveColor
        tabButton.TextColor3 = inactiveTextColor
    end
    
    tabButton.MouseButton1Click:Connect(function()
        if selectedTab == tabButton then return end

        CloseAllDropdowns:Fire()

        if selectedTab then
            selectedTab.BackgroundColor3 = inactiveColor
            selectedTab.TextColor3 = inactiveTextColor
            if pages[selectedTab] then pages[selectedTab].Visible = false end
        end

        tabButton.BackgroundColor3 = activeColor
        tabButton.TextColor3 = activeTextColor
        if pages[tabButton] then pages[tabButton].Visible = true end

        selectedTab = tabButton
    end)
    
    return pageFrame, tabButton
end


--- ### FUNCTION: createWindow (The Main Function) ###
function Library.createWindow(windowTitle, windowSubtitle)
    if PlayerGui:FindFirstChild("MainUI") then PlayerGui:FindFirstChild("MainUI"):Destroy() end
    if PlayerGui:FindFirstChild("ToggleGui") then PlayerGui:FindFirstChild("ToggleGui"):Destroy() end

    local mainScreenGui = Instance.new("ScreenGui")
    mainScreenGui.Name = "MainUI"
    mainScreenGui.Parent = PlayerGui
    mainScreenGui.ResetOnSpawn = false

    local rectangle = Instance.new("Frame")
    rectangle.Name = "Rectangle"
    rectangle.Parent = mainScreenGui
    rectangle.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    rectangle.BackgroundTransparency = 0
    rectangle.BorderSizePixel = 0
    rectangle.Size = UDim2.new(0, 550, 0, 450)
    rectangle.Position = UDim2.fromScale(0.5, 0.5)
    rectangle.AnchorPoint = Vector2.new(0.5, 0.5)
    rectangle.Active = true
    rectangle.Draggable = true

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = rectangle

    local windowOutline = Instance.new("UIStroke")
    windowOutline.Name = "WindowOutline"
    windowOutline.Color = Color3.fromRGB(0, 0, 0)
    windowOutline.Thickness = 4
    windowOutline.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    windowOutline.Parent = rectangle

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "TitleLabel"
    titleLabel.Parent = rectangle
    titleLabel.Text = windowTitle or "Window"
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.TextSize = 16
    titleLabel.TextColor3 = Library.themeColor
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.BackgroundTransparency = 1
    titleLabel.Active = false
    titleLabel.Position = UDim2.new(0, 10, 0, 10)
    titleLabel.Size = UDim2.new(0, 200, 0, 20)

    local subtitleLabel = Instance.new("TextLabel")
    subtitleLabel.Name = "SubtitleLabel"
    subtitleLabel.Parent = rectangle
    subtitleLabel.Text = windowSubtitle or ""
    subtitleLabel.Font = Enum.Font.SourceSans
    subtitleLabel.TextSize = 12
    subtitleLabel.TextColor3 = Library.themeColor
    subtitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    subtitleLabel.BackgroundTransparency = 1
    subtitleLabel.Active = false
    subtitleLabel.Position = UDim2.new(0, 15, 0, 27)
    subtitleLabel.Size = UDim2.new(0, 200, 0, 16)

    local toggleGui = Instance.new("ScreenGui")
    toggleGui.Name = "ToggleGui"
    toggleGui.Parent = PlayerGui
    toggleGui.ResetOnSpawn = false
    toggleGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    local openCloseButton = Instance.new("TextButton")
    openCloseButton.Name = "OpenCloseButton"
    openCloseButton.Parent = toggleGui
    openCloseButton.Text = "Close"
    openCloseButton.Font = Enum.Font.SourceSansBold
    openCloseButton.TextSize = 14
    openCloseButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    openCloseButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    openCloseButton.Size = UDim2.new(0, 120, 0, 30)
    openCloseButton.Position = UDim2.new(0, 10, 0.3, 0)
    openCloseButton.AnchorPoint = Vector2.new(0, 0.5)
    openCloseButton.Active = true
    openCloseButton.Draggable = true

    local ocCorner = Instance.new("UICorner")
    ocCorner.CornerRadius = UDim.new(0, 4)
    ocCorner.Parent = openCloseButton

    local ocStroke = Instance.new("UIStroke")
    ocStroke.Color = Library.themeColor
    ocStroke.Thickness = 1
    ocStroke.Parent = openCloseButton

    local lockButton = Instance.new("TextButton")
    lockButton.Name = "LockButton"
    lockButton.Parent = toggleGui
    lockButton.Text = "Lock"
    lockButton.Font = Enum.Font.SourceSansBold
    lockButton.TextSize = 14
    lockButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    lockButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    lockButton.Size = UDim2.new(0, 120, 0, 30)
    lockButton.Position = UDim2.new(0, 10, 0.3, 40)
    lockButton.AnchorPoint = Vector2.new(0, 0.5)
    lockButton.Active = true
    lockButton.Draggable = true

    local lockCorner = Instance.new("UICorner")
    lockCorner.CornerRadius = UDim.new(0, 4)
    lockCorner.Parent = lockButton

    local lockStroke = Instance.new("UIStroke")
    lockStroke.Color = Library.themeColor
    lockStroke.Thickness = 1
    lockStroke.Parent = lockButton
    
    ThemeChanged.Event:Connect(function(newColor)
        ocStroke.Color = newColor
        lockStroke.Color = newColor
    end)
    
    -- This function is now local to the window
    local function setUIVisible(isVisible)
        mainScreenGui.Enabled = isVisible
        if isVisible then
            openCloseButton.Text = "Close"
        else
            openCloseButton.Text = "Open"
        end
    end

    openCloseButton.MouseButton1Click:Connect(function()
        setUIVisible(not mainScreenGui.Enabled)
    end)

    lockButton.MouseButton1Click:Connect(function()
        local isDraggable = not rectangle.Draggable
        rectangle.Draggable = isDraggable
        
        if isDraggable then
            lockButton.Text = "Lock"
            Library.createNotification("UI", "UI Unlocked")
        else
            lockButton.Text = "Unlock"
            Library.createNotification("UI", "UI Locked")
        end
    end)

    local closeButton = Instance.new("TextButton")
    closeButton.Name = "CloseButton"
    closeButton.Parent = rectangle
    closeButton.Text = "X"
    closeButton.Font = Enum.Font.SourceSansBold
    closeButton.TextSize = 16
    closeButton.TextColor3 = Color3.fromRGB(220, 220, 220)
    closeButton.BackgroundTransparency = 1
    closeButton.BorderSizePixel = 0
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -30, 0, 5)

    closeButton.MouseButton1Click:Connect(function()
        CloseAllDropdowns:Fire()
        mainScreenGui:Destroy()
        -- notificationGui is persistent, so don't destroy it
        local watermark = PlayerGui:FindFirstChild("WatermarkGui")
        if watermark then watermark:Destroy() end
        toggleGui:Destroy()
    end)

    local dividerLine = Instance.new("Frame")
    dividerLine.Name = "Divider"
    dividerLine.Parent = rectangle
    dividerLine.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    dividerLine.BorderSizePixel = 0
    dividerLine.Position = UDim2.new(0, 120, 0, 30)
    dividerLine.Size = UDim2.new(1, -120, 0, 1)

    local tabDivider = Instance.new("Frame")
    tabDivider.Name = "TabDivider"
    tabDivider.Parent = rectangle
    tabDivider.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    tabDivider.BorderSizePixel = 0
    tabDivider.Position = UDim2.new(0, 120, 0, 0)
    tabDivider.Size = UDim2.new(0, 1, 1, 0)

    local tabContainer = Instance.new("ScrollingFrame")
    tabContainer.Name = "TabContainer"
    tabContainer.Parent = rectangle
    tabContainer.BackgroundTransparency = 1
    tabContainer.BorderSizePixel = 0
    tabContainer.Position = UDim2.new(0, 0, 0, 51)
    tabContainer.Size = UDim2.new(0, 120, 1, -51)
    tabContainer.ScrollingDirection = Enum.ScrollingDirection.Y
    tabContainer.ScrollBarThickness = 2
    tabContainer.ScrollBarImageColor3 = Library.themeColor
    tabContainer.CanvasSize = UDim2.new(0, 0, 0, 0)

    local tabLayout = Instance.new("UIListLayout")
    tabLayout.Parent = tabContainer
    tabLayout.FillDirection = Enum.FillDirection.Vertical
    tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    tabLayout.Padding = UDim.new(0, 5)
    tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
    
    local tabListPadding = Instance.new("UIPadding")
    tabListPadding.Parent = tabContainer
    tabListPadding.PaddingTop = UDim.new(0, 5)
    tabListPadding.PaddingLeft = UDim.new(0, 5)
    tabListPadding.PaddingRight = UDim.new(0, 5)


    tabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        local contentHeight = tabLayout.AbsoluteContentSize.Y
        tabContainer.CanvasSize = UDim2.new(0, 0, 0, contentHeight + 20)
    end)

    ThemeChanged.Event:Connect(function(newColor)
        tabContainer.ScrollBarImageColor3 = newColor
    end)

    local contentContainer = Instance.new("Frame")
    contentContainer.Name = "ContentContainer"
    contentContainer.Parent = rectangle
    contentContainer.BackgroundTransparency = 1
    contentContainer.ClipsDescendants = true
    contentContainer.Position = UDim2.new(0, 121, 0, 35)
    contentContainer.Size = UDim2.new(1, -121, 1, -35)

    local contentPadding = Instance.new("UIPadding")
    contentPadding.Parent = contentContainer
    contentPadding.PaddingLeft = UDim.new(0, 5)
    contentPadding.PaddingRight = UDim.new(0, 5)
    contentPadding.PaddingBottom = UDim.new(0, 5)

    -- Return all the parts you need to build your UI
    return mainScreenGui, rectangle, tabContainer, contentContainer, titleLabel, subtitleLabel, toggleGui, setUIVisible
end

-- ### Make the Library global ###
-- This makes it accessible to other scripts
_G.Library = Library

print("UI Library Loaded.")
-- ##################################################################
-- ##################################################################
-- ###   [  END OF THE UI LIBRARY  ]   ###
-- ##################################################################
-- ##################################################################
